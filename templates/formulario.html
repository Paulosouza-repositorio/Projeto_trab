<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Luminus Conecta - Formul√°rio</title>
  <link rel="icon" href="logo.png.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
    }
    header {
      background-color: #ffffff;
      color: rgb(12, 12, 12);
      padding: 1.5rem 1rem;
      text-align: center;
    }
    .logo {
      max-height: 80px;
      margin-bottom: 10px;
    }
    .container {
      max-width: 700px;
      margin-top: 30px;
      margin-bottom: 30px;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9em;
      color: #888;
    }
    .golden-cross-modal .modal-header {
      background-color: #ffc107;
      color: #000;
    }
    .golden-cross-badge {
      background-color: #ffc107;
      color: #000;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>

<!-- Modal de Boas-Vindas -->
<div class="modal fade" id="welcomeModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content golden-cross-modal">
      <div class="modal-header">
        <h5 class="modal-title">
          <span class="golden-cross-badge">ATEN√á√ÉO</span> Clientes Golden Cross!
        </h5>
      </div>
      <div class="modal-body">
        <h4 class="text-center mb-4">üéâ Oferta Especial para Voc√™!</h4>
        <p>Temos condi√ß√µes exclusivas para clientes da Golden Cross:</p>
        <ul>
          <li><strong>Descontos especiais</strong> na migra√ß√£o</li>
          <li><strong>Car√™ncia reduzida</strong> para procedimentos</li>
          <li><strong>Benef√≠cios exclusivos</strong> no primeiro ano</li>
        </ul>
        <p class="text-center mt-3">Selecione "Golden Cross" no formul√°rio para conhecer sua oferta personalizada!</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Entendi</button>
      </div>
    </div>
  </div>
</div>

<header>
  <img src="{{ url_for('static', filename='logo_luminus.png') }}" class="logo" alt="Luminus Conecta">
  <h5>Conectando voc√™ ao seu pr√≥ximo plano de sa√∫de. Preencha o formul√°rio abaixo e receba nosso contato.</h5>
</header>

<div class="container">
  {% with messages = get_flashed_messages(category_filter=["success", "danger"]) %}
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ 'success' if 'sucesso' in message.lower() else 'danger' }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form id="formulario" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="nome" class="form-label">Nome completo</label>
      <input type="text" name="nome" class="form-control" required>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">E-mail</label>
      <input type="email" name="email" class="form-control">
    </div>

    <div class="mb-3">
      <label for="telefone" class="form-label">Telefone</label>
      <input type="text" name="telefone" class="form-control">
    </div>

    <div class="mb-3">
      <label for="cidade_estado" class="form-label">Cidade/Estado</label>
      <input type="text" name="cidade_estado" class="form-control">
    </div>

    <div class="mb-3">
      <label class="form-label">Voc√™ tem plano de sa√∫de?</label><br>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="tem_plano" id="tem_plano_sim" value="sim">
        <label class="form-check-label" for="tem_plano_sim">Sim</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="tem_plano" id="tem_plano_nao" value="n√£o">
        <label class="form-check-label" for="tem_plano_nao">N√£o</label>
      </div>
    </div>

    <div class="mb-3" id="campo_plano" style="display: none;">
      <label for="plano_atual" class="form-label">Qual plano?</label>
      <select class="form-select" name="plano_atual" id="plano_atual">
        <option value="">Selecione</option>
        <option value="Amil">Amil</option>
        <option value="Bradesco">Bradesco</option>
        <option value="SulAm√©rica">SulAm√©rica</option>
        <option value="Golden Cross">Golden Cross</option>
        <option value="Outro">Outro</option>
      </select>
    </div>

    <div class="mb-3" id="campo_valor" style="display: none;">
      <label for="valor_pago" class="form-label">Valor pago atualmente</label>
      <input type="text" name="valor_pago" class="form-control" placeholder="R$">
    </div>

    <div class="mb-3">
      <label class="form-label">Tipo de plano:</label>
      <select class="form-select" name="tipo_plano">
        <option value="">Selecione</option>
        <option value="Empresarial">Empresarial</option>
        <option value="Individual">Individual</option>
        <option value="Familiar">Familiar</option>
      </select>
    </div>

    <!-- Tipo Pessoa -->
    <div class="mb-3">
      <label class="form-label">Tipo de pessoa:</label>
      <select name="tipo_pessoa" id="tipo_pessoa" class="form-select" required>
        <option value="">Selecione</option>
        <option value="pf">Pessoa F√≠sica</option>
        <option value="pj">Pessoa Jur√≠dica</option>
      </select>
    </div>

    <!-- CPF -->
    <div class="mb-3" id="campo_cpf" style="display: none;">
      <label for="cpf" class="form-label">CPF</label>
      <input type="text" name="cpf" class="form-control">
    </div>

    <!-- Campos PJ -->
    <div id="campos_pj" style="display: none;">
      <div class="mb-3">
        <label for="cnpj" class="form-label">CNPJ</label>
        <input type="text" name="cnpj" class="form-control">
      </div>

      <div class="mb-3">
        <label for="mei" class="form-label">√â MEI?</label>
        <select name="mei" class="form-select">
          <option value="">Selecione</option>
          <option value="Sim">Sim</option>
          <option value="N√£o">N√£o</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="tempo_abertura" class="form-label">Tempo de abertura da empresa</label>
        <input type="text" name="tempo_abertura" class="form-control">
      </div>

      <div class="mb-3">
        <label for="quantas_vidas" class="form-label">Quantas vidas?</label>
        <input type="number" name="quantas_vidas" class="form-control">
      </div>
    </div>

    <div class="mb-3">
      <label for="idade_vidas" class="form-label">Idade das vidas</label>
      <input type="text" name="idade_vidas" class="form-control">
    </div>

    <div class="mb-3">
      <label for="bairro" class="form-label">Bairro onde reside</label>
      <input type="text" name="bairro" class="form-control">
    </div>

    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" name="interesse_novo" id="interesse_novo" value="sim">
      <label class="form-check-label" for="interesse_novo">Tenho interesse em contratar um novo plano</label>
    </div>

    <div class="mb-3">
      <label for="contato" class="form-label">Autorizo contato?</label>
      <select name="contato" class="form-select">
        <option value="Sim">Sim</option>
        <option value="N√£o">N√£o</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="comentario_adicional" class="form-label">Coment√°rio adicional</label>
      <textarea name="comentario_adicional" class="form-control" rows="3"></textarea>
    </div>

    <button type="submit" class="btn btn-dark mt-3 w-100">Enviar</button>
  </form>
</div>

<footer>
  &copy; 2025 Luminus Conecta - Todos os direitos reservados.
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const welcomeModal = new bootstrap.Modal(document.getElementById('welcomeModal'));
    welcomeModal.show();

    const tipoPessoaSelect = document.getElementById('tipo_pessoa');
    const campoCPF = document.getElementById('campo_cpf');
    const camposPJ = document.getElementById('campos_pj');
    const campoPlano = document.getElementById('campo_plano');
    const campoValor = document.getElementById('campo_valor');

    tipoPessoaSelect.addEventListener('change', function () {
      campoCPF.style.display = this.value === 'pf' ? 'block' : 'none';
      camposPJ.style.display = this.value === 'pj' ? 'block' : 'none';
    });

    document.querySelectorAll('input[name="tem_plano"]').forEach(radio => {
      radio.addEventListener('change', function () {
        campoPlano.style.display = this.value === 'sim' ? 'block' : 'none';
        campoValor.style.display = this.value === 'sim' ? 'block' : 'none';
      });
    });

    {% with messages = get_flashed_messages(category_filter=["popup"]) %}
      {% if 'golden_cross' in messages %}
        const goldenModal = new bootstrap.Modal(document.getElementById('goldenCrossModal'));
        goldenModal.show();
      {% endif %}
    {% endwith %}
  });
</script>

</body>
</html>
